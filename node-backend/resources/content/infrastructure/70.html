<div>
    <span><div>At this point,you should already have an idea of how Kubernetes works, if not refer to our first part: <a
            href="http://sysdotoutdotprint.com/technologies/infrastructure/52">http://sysdotoutdotprint.com/technologies/infrastructure/52</a>, don't worry if it's too much to absorb right now it will get clearer once you get your hands dirty. </div><div><br/></div><div><span
            style="font-weight: bold;">Prerequisites</span></div><div><ul><li>kubernetes</li><li>minikube</li></ul><div><br/></div></div><div><span
            style="font-weight: bold;">First steps!</span></div><div>In order for you to get started with Kubernetes you need to be connected to a cluster, but since we are testing the concepts on our local machine it might not be too easy to connect to a cluster, I will try to create a tutorial next for connecting through an actual cluster using Terraform but for now this is were minikube comes in!</div><div><br/></div><div><ol
            start="1"><li><span style="font-weight: bold;"><font
            style="font-size: 12pt;">Start your cluster (minikube) </font></span></li></ol><div>At this point you should already have minikube installed, and it will be just a matter of running </div><div><br/></div></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>minikube start</div></div><div><br/></div><div>which will notify you the following:</div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Starting local Kubernetes v1.9.0 cluster...</div><div>Starting VM...</div><div>Getting VM IP address...</div><div>Moving files into cluster...</div><div>Setting up certs...</div><div>Connecting to cluster...</div><div>Setting up kubeconfig...</div><div>Starting cluster components...</div><div>Kubectl is now configured to use the cluster.</div><div>Loading cached images from config file.</div></div><div><font
            style="font-size: 12pt;"><br/></font></div><div><ol start="2"><li><font style="font-size: 12pt;"><span
            style="font-weight: bold;">Get you cluster ip/name or dns server</span></font></li></ol><div><span
            style="font-size: 13.3333px;">You can achieve this by running, take note of this ip, this is how you will access your cluster. This is only applicable in your local machine, in a real case scenario, you will use different cluster ip or dns names </span></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>minikube ip</div></div><div><ol
            start="3"><li><span style="font-weight: bold;"><font style="font-size: 12pt;">Create a kubernetes deployment/pod</font></span></li></ol><div><b>Note</b> image below is a public image located in docker hub, it will be different if you are using a private repository in which case you will need to setup some credentials, but the concept is the same.</div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl run &lt;name_of_deployment&gt; --image=mel3kings/sysdotoutdotprint:latest --port=8080</div></div></div><div>        4. <b><font
            style="font-size: 12pt;">Verify your deployment</font></b><br/></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl get deployments</div></div><div><br/></div></div><div>You will see the below, AVAILABLE should be the same as DESIRED, meaning it is up and running, if it didn't turn 1, then there might be a problem, in which you can your cluster/kubectl for any errors</div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>NAME           DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div>sysoutprint    1         1         1            1           54s</div></div><div><b><br/></b></div><div><ol
            start="5"><li><b><font style="font-size: 12pt;">Verify your pods <span style="font-weight: bold;">(Remember pods are automatically created from deployments)</span></font></b></li></ol><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl get pods</div></div></div><div>The below is what you will see, I've created a second deployment with intentional typos, to see the status of it not working:</div><div><br/></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>NAME                            READY     STATUS         RESTARTS   AGE</div><div>sysoutprint-cbc8f8c6f-j98wf     1/1       Running        0          2m</div><div>sysoutprint2-5b98896dd8-p69q8   0/1       ErrImagePull   0          1m</div></div><div><br/></div><div><ol
            start="6"><li><b><font style="font-size: 12pt;">Debugging if your pods does not start</font></b></li></ol><div>If something goes wrong you can always run the below, which will print out logs for each pod, very similar to how Docker would do it</div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl logs sysoutprint2-5b98896dd8-p69q8</div><div>Error from server (BadRequest): container &quot;sysoutprint2&quot; in pod &quot;sysoutprint2-5b98896dd8-p69q8&quot; is waiting to start: image can't be pulled</div></div></div><div><br/></div><div><ol
            start="7"><li><font style="font-size: 12pt;"><b>Expose your Service</b></font></li></ol><div><font
            style="font-size: 10pt;">Again Similar to Docker you need to expose your services to the outside world, you can achieve this by:</font></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl expose deployments/sysoutprint --type=NodePort </div></div></div><div><font
            style="color: rgb(255, 0, 0);"><b>Pitfalls: </b></font>Since we are only using minikube as of the moment we can only expose via <b>NodePort</b>, which by default gives us a default port to access our pods:</div><div><font
            style="font-size: 12pt;"><br/></font></div><div><b><font style="font-size: 12pt;">Two ways to get your pods url:</font></b></div><div><b>First through kubernetes:</b></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl get service</div></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span
            style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">NAME          TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE</span></div><div><span
            style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">kubernetes    ClusterIP   10.96.0.1      &lt;none&gt;        443/TCP          33m</span></div><div><span
            style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">sysoutprint   NodePort    10.98.99.167   &lt;none&gt;        8080:30943/TCP   4m</span></div></div><div><br/></div><div>Disregard CLUSTER-IP for now, notice the ports, so minikube exposed your pods port 8080 to 30943, so you will be able to access it via:</div><div><b>http://&lt;minikube_ip&gt;/30943</b></div><div>This port is randomly generated everytime so you need to get it</div><div><br/></div><div><b>Second is through Minikube</b></div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>minikube service &lt;service_name&gt; --url</div></div><div>which will return your service url:</div><div
            style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http://192.168.99.100:30943</div></div><div><span
            style="color: rgb(255, 0, 0); font-weight: bold;"><br/></span></div><div><span
            style="color: rgb(255, 0, 0); font-weight: bold;">Pitfalls:</span> <span style="font-weight: bold;">There are instances where Docker Toolbox can cause issues to running your services through minikube, as they both run on the same ip: 192.168.99.100,  so it is recommended to turn off Docker Toolbox if you have it running</span></div></span>
</div>